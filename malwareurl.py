import requests
from bs4 import BeautifulSoup

with open("apikey.txt","r") as f: apikey=f.read()
print(apikey)

def wykryj_malware(url:str):
    # bieda edition opcje menu
    sprawdz_linki = True
    sprawdz_url_skryptow = True

    urls_scripts = []
    urls_links = []

    # Pobierz kod źródłowy strony
    print("Pobieranie strony...")
    r = requests.get(url)
    source = r.text

    # Przetwórz pobrany kod strony
    print("Przetwarzanie HTML")
    soup = BeautifulSoup(source, "html.parser")

    if sprawdz_url_skryptow:
        print("Filtrowanie URL skryptów")
        scripts = soup.find_all("script",src=True)
        for i in scripts: 
            if str(i["src"]) not in urls_scripts: urls_scripts.append(str(i["src"]))

    if sprawdz_linki:
        print("Filtrowanie URL odnośników")
        links = soup.find_all("a", href=True)
        for i in links:
            if str(i["href"]) not in urls_links: urls_links.append(str(i["href"]))

    print(f"Znaleziono:\n{len(urls_scripts)}\tURL skryptów\n{len(urls_links)}\tURL hiperłączy")

wykryj_malware("https://wp.pl")